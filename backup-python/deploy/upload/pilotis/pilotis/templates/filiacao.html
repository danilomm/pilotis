{% extends "base.html" %}

{% block content %}
<article>
    <header>
        <h1>Filiação Docomomo Brasil {{ ano }}</h1>
        <p>Preencha ou atualize seus dados para prosseguir com a filiação.</p>
    </header>

    {% if pagamento_existente and pagamento_existente.status == 'pago' %}
    <aside>
        <p><strong>Sua filiação {{ ano }} já está confirmada!</strong></p>
    </aside>
    {% endif %}

    <form method="post">
        <fieldset>
            <legend>Dados Pessoais</legend>

            <label for="nome">
                Nome completo *
                <input type="text" id="nome" name="nome" value="{{ cadastrado.nome }}" required>
            </label>

            <label for="email">
                Email *
                <input type="email" id="email" name="email" value="{{ cadastrado.email }}" required>
                <small>Se tiver mais de um, separe por ponto e virgula (;)</small>
            </label>

            <div class="grid">
                <label for="cpf">
                    CPF *
                    <input type="text" id="cpf" name="cpf" value="{{ cadastrado.cpf or '' }}"
                           placeholder="000.000.000-00" required>
                </label>

                <label for="telefone">
                    Telefone *
                    <input type="tel" id="telefone" name="telefone" value="{{ cadastrado.telefone or '' }}"
                           placeholder="(00) 00000-0000" required>
                </label>
            </div>
        </fieldset>

        <fieldset>
            <legend>Endereço para correspondência</legend>
            <small style="display: block; margin-bottom: 1rem; color: var(--pico-muted-color);">
                Informe um endereço onde você possa receber revistas e publicações do Docomomo.
            </small>

            <label for="endereco">
                Endereço *
                <input type="text" id="endereco" name="endereco" value="{{ cadastrado.endereco or '' }}"
                       placeholder="Rua, número, complemento" required>
            </label>

            <div class="grid">
                <label for="cep">
                    CEP *
                    <input type="text" id="cep" name="cep" value="{{ cadastrado.cep or '' }}"
                           placeholder="00000-000" required>
                </label>

                <label for="cidade">
                    Cidade *
                    <input type="text" id="cidade" name="cidade" value="{{ cadastrado.cidade or '' }}" required>
                </label>

                <label for="estado">
                    Estado *
                    <input type="text" id="estado" name="estado" value="{{ cadastrado.estado or '' }}"
                           placeholder="UF" maxlength="2" required>
                </label>
            </div>

            <label for="pais">
                País *
                <input type="text" id="pais" name="pais" value="{{ cadastrado.pais or 'Brasil' }}" required>
            </label>
        </fieldset>

        <fieldset>
            <legend>Dados Profissionais</legend>

            <label for="profissao">
                Profissão
                <input type="text" id="profissao" name="profissao" value="{{ cadastrado.profissao or '' }}">
            </label>

            <label for="formacao">
                Formação
                <input type="text" id="formacao" name="formacao" value="{{ cadastrado.formacao or '' }}"
                       placeholder="Ex: Graduação, Mestrado, Doutorado">
            </label>

            <label for="instituicao">
                Instituição
                <input type="text" id="instituicao" name="instituicao" value="{{ cadastrado.instituicao or '' }}">
            </label>
        </fieldset>

        <fieldset>
            <legend>Categoria de Filiação *</legend>

            {% for cat in categorias %}
            <label>
                <input type="radio" name="categoria" value="{{ cat.valor }}"
                       {% if cat.selecionada %}checked{% endif %} required>
                {{ cat.label }}
            </label>
            {% endfor %}
        </fieldset>

        <fieldset>
            <legend>Observações</legend>
            <label for="observacoes_filiado">
                Deixe uma mensagem para a Diretoria (opcional)
                <textarea id="observacoes_filiado" name="observacoes_filiado" rows="3"
                          placeholder="Escreva aqui se quiser enviar alguma mensagem...">{{ cadastrado.observacoes_filiado or '' }}</textarea>
            </label>
        </fieldset>

        <button type="submit">Prosseguir para Pagamento</button>
    </form>
</article>
{% endblock %}
